# GitLab CLI 输出模板示例
# 支持 Go template 语法，可以访问 OutputConfig 结构中的所有数据
# 数据结构: .Endpoint (完整 URL), .Scheme (http/https), .Host (主机名) 是 GitLab 服务器配置
# 数据结构: .Users[0] 包含 Username, Email, Name, UserID, Password, Token, Groups, Projects

{{- range .Users }}
# ========================================
# 用户: {{ .Username }}
# ========================================

toolchains:
  gitlab:
    # endpoint is the full endpoint of the server
    endpoint: {{ $.Endpoint }}
    host: {{ $.Host }}
    # scheme, http or https
    scheme: {{ $.Scheme }}
    # username, the user name of the login account
    username: {{ .Username }}
    # email
    email: {{ .Email }}
    {{- if .Password }}
    # password
    password: {{ .Password }}
    {{- end }}
    {{- if .Token }}
    # Personal Access Token
    token:
      value: {{ .Token.Value }}
      scope: {{ range $i, $s := .Token.Scope }}{{ if $i }}, {{ end }}{{ $s }}{{ end }}
      expires_at: {{ .Token.ExpiresAt }}
    {{- end }}
    {{- if .Groups }}
    # Groups and Projects
    TestGroups:
      default: {{ .Username }}
      {{- range .Groups }}
      - name: {{ .Name }}
        path: {{ .Path }}
        group_id: {{ .GroupID }}
        visibility: {{ .Visibility }}
        {{- if .Projects }}
        projects:
          {{- range .Projects }}
          - name: {{ .Name }}
          {{- end }}
        {{- end }}
      {{- end }}
    {{- end }}
{{- end }}
